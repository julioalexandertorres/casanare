<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<title>Administrador</title>
	<meta content='width=device-width, initial-scale=1.0, shrink-to-fit=no' name='viewport' />
	<link rel="icon" href="../assets/img/kaiadmin/escudo.ico" type="image/x-icon"/>

	<script src="/buenaventura/admin/vuacc.js"></script>
    <script>document.addEventListener('DOMContentLoaded', function () {verificarAcceso();});</script>
	<!-- Fonts and icons -->
	<script src="../assets/js/plugin/webfont/webfont.min.js"></script>
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<script>
		WebFont.load({
			google: {"families":["Public Sans:300,400,500,600,700"]},
			custom: {"families":["Font Awesome 5 Solid", "Font Awesome 5 Regular", "Font Awesome 5 Brands", "simple-line-icons"], urls: ['../assets/css/fonts.min.css']},
			active: function() {
				sessionStorage.fonts = true;
			}
		});
	</script>
	<script src="/buenaventura/visor/sql/js_sql.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/bcryptjs/2.4.3/bcrypt.js"></script>
	
	<link rel="stylesheet" href="../assets/css/bootstrap.min.css">
	<link rel="stylesheet" href="../assets/css/plugins.min.css">
	<link rel="stylesheet" href="../assets/css/kaiadmin.min.css">
	<link rel="stylesheet" href="../assets/css/demo.css">
</head>
<body>
	<div class="wrapper">
		<div class="sidebar" data-background-color="dark">
			<div class="sidebar-logo">
				<div class="logo-header" data-background-color="dark">
					<a href="#" class="logo">
						<img src="../assets/img/kaiadmin/logo.png" alt="navbar brand" class="navbar-brand" height="20">
					</a>
					<div class="nav-toggle">
						<button class="btn btn-toggle toggle-sidebar">
							<i class="gg-menu-right"></i>
						</button>
						<button class="btn btn-toggle sidenav-toggler">
							<i class="gg-menu-left"></i>
						</button>
					</div>
					<button class="topbar-toggler more">
						<i class="gg-more-vertical-alt"></i>
					</button>
				</div>	
			</div>	
			<div class="sidebar-wrapper scrollbar scrollbar-inner">
				<div class="sidebar-content">
					<ul class="nav nav-secondary">			
						<li class="nav-item">
							<a href="/buenaventura/admin.html">
								<i class="fas fa-chart-pie"></i>
								<p>Estadísticas</p>
							</a>						
						</li>
						<li class="nav-item">
							<a href="/buenaventura/template_admin/tables/datatables.html">
								<i class="fas fa-users"></i>
								<p>Administrar Usuarios</p>
							</a>
						</li>
						<li class="nav-item active">
							<a href="/buenaventura/template_admin/tables/tables.html">
								<i class="fas fa-database"></i>
								<p>Administrar SIG</p>
							</a>
						</li>						
						<li class="nav-item">
							<a href="./../manual/manual_administrador.pdf" target="_blank">
							  <i class="fas fa-file"></i>
							  <p>Manual de usuario</p>
							  <!--<span class="badge badge-secondary">1</span>-->
							</a>
						</li>
					</ul>
				</div>
			</div>
		</div>
		<!-- End Sidebar -->

		<div class="main-panel">
			<div class="main-header">
				<div class="main-header-logo">
					<!-- Logo Header -->
					<div class="logo-header" data-background-color="dark">
						<a href="#" class="logo">
							<img src="../assets/img/kaiadmin/logo_light.svg" alt="navbar brand" class="navbar-brand" height="20">
						</a>
						<div class="nav-toggle">
							<button class="btn btn-toggle toggle-sidebar">
								<i class="gg-menu-right"></i>
							</button>
							<button class="btn btn-toggle sidenav-toggler">
								<i class="gg-menu-left"></i>
							</button>
						</div>
						<button class="topbar-toggler more">
							<i class="gg-more-vertical-alt"></i>
						</button>

					</div>
					<!-- End Logo Header -->
				</div>
				<!-- Navbar Header -->
				<nav class="navbar navbar-header navbar-header-transparent navbar-expand-lg border-bottom">
					<div class="container-fluid">
					  <h3 class="fw-bold mb-3">Administrar Información</h3>
					</div>
					<ul class="navbar-nav topbar-nav ms-md-auto align-items-center" id="tsalir" style="cursor: pointer;">
						<li class="nav-item topbar-icon dropdown hidden-caret">
							<div class="info-user ms-3">
								<div class="username">Salir</div>
							</div>
						</li>
						<li class="nav-item topbar-icon dropdown hidden-caret">
							<a class="nav-link">
								<!--<i class="fas fa-layer-group"></i>-->	
								<i class="fas fa-sign-out-alt"></i>		
							</a>	
						</li>	
					</ul>
				</nav>
				<!-- End Navbar -->
			</div>
				
			<div class="container">
				<div id="alert-container"></div>
				<div class="page-inner">
					<div class="row">
						<div class="col-md-6">
							<div class="card">
								<div class="card-header">
									<div class="card-title">Cargar capas en la base de datos &nbsp;<i class="fas fa-database"></i></div>
								</div>
								<div class="card-body d-flex justify-content-center">
									<form class="file-upload-form" id="upload-form" enctype="multipart/form-data">
										<label for="file" class="file-upload-label">
											<div class="file-upload-design">
												<svg viewBox="0 0 640 512" height="1em">
													<path
														d="M144 480C64.5 480 0 415.5 0 336c0-62.8 40.2-116.2 96.2-135.9c-.1-2.7-.2-5.4-.2-8.1c0-88.4 71.6-160 160-160c59.3 0 111 32.2 138.7 80.2C409.9 102 428.3 96 448 96c53 0 96 43 96 96c0 12.2-2.3 23.8-6.4 34.6C596 238.4 640 290.1 640 352c0 70.7-57.3 128-128 128H144zm79-217c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l39-39V392c0 13.3 10.7 24 24 24s24-10.7 24-24V257.9l39 39c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-80-80c-9.4-9.4-24.6-9.4-33.9 0l-80 80z">
													</path>
												</svg>
												<span class="browse-button">Buscar archivo</span>
												<span class="file-name"></span>
											</div>
											<input id="file" type="file" name="shapefile" accept=".zip" required/>
										</label>
										<div class="input-row">
											<input type="text" class="form-control" name="tableName" placeholder="Nombre de la tabla" required/>
										</div>
										<label for="esq">Seleccione el Esquema:</label>
										<select id='esq' name="esq" class='form-select'>
											<option value='' disabled selected>Seleccione...</option>
											<option value='catastro'>Catastro</option>
											<option value='dane'>Dane</option>
											<option value='gestion_del_riesgo'>Gestión del Riesgo</option>
											<option value='pgirs'>Plan de gestión integral de residuos solidos</option>
											<option value='restitucion'>Restitución</option>
										</select>
										<div class="button-row">
											<button type="submit" id="botonLoadshp" class="btn btn-azul" disabled>Cargar Shapefile</button>
											<button id="botonCargandoshp" style="display: none;" class="btn btn-primary" type="button" disabled>
												<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
												Cargando...
											</button>
										</div>										
									</form>
								</div>
							</div>
						</div>
						<div class="col-md-6">
							<div class="card">
								<div class="card-header">
									<div class="card-title">Base de datos</div>
								</div>
								<div class="container" style="font-size: 14px;">
									<div class="control-group">
										<label class="control-label" for="esquema">Seleccione el Esquema a consultar: </label>
										<div class="col-md-12">
											<select id="esquema" class="form-select" onchange="datosesq(id)">
												<option selected>Seleccione...</option>
												<option value="catastro">Catastro</option>
												<option value="pgirs">Plan de gestión integral de residuos solidos</option>
												<option value="dane">Dane</option>
												<option value="gestion_del_riesgo">Gestión del riesgo</option>
												<option value="restitucion">Restitución</option>												
											</select>
										</div>
									</div>
								</div>
			
								<div class="container" style="font-size: 14px;">
									<div class="row align-items-start">
										<br><label class="control-label" for="tablasbase" id="labeltablasbase">Seleccione la tabla a consultar: </label>
										<div class="col-md-12">
											<select id="tablasbase" class="form-control" disabled onchange="datostab(id)"></select>
										</div>
									</div>
								</div>
			
								<div class="container" style="font-size: 14px;">
									<div class="row align-items-start">
										<label class="control-label" for="datostablasbase" id="labeldatostablasbase">Columnas de la tabla: </label>
										<div class="col-md-12">
											<select id="datostablasbase" class="form-control" multiple size="7" disabled></select>
										</div>
									</div>
			
									<div id="menuBad"><br>
										<button type="button" id="deletetable" class="btn btn-danger" disabled>Eliminar</button>
										<button id="botonCargandoeliminarshp" style="display: none;" class="btn btn-danger" type="button" disabled>
											<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
											Eliminando...
										</button>
									</div><br>
			
								</div>
							</div>
			
						</div>
					</div>
			
					<div class="row">
						<div class="col-md-6">
							<div class="card">
								<div class="card-header">
									<div class="card-title">Publicar servicio geográfico</div>
								</div>
								<div class="container" style="font-size: 14px;">
									<a href="https://www.geomonsas.xyz:8443/geoserver" target="_blank"><img src="/buenaventura/imagenes/geoserver.jpg" alt="Ir al servidor de mapas" style="width: 100%;"></a>
						        </div>
							</div>
						</div>
					
			
						<div class="col-md-6">
							<div class="card">
								<div class="card-header">
									<div class="card-title">Visor geográfico</div>
								</div>
								<form id="uploadVisor">
									<div class="container" style="font-size: 14px;">
										<label class="control-label" for="esquema">Nombre de la Capa en Geoserver: </label>
										<input type="text" id="namecapa" class="form-control" name="tableName" placeholder="Nombre de la tabla" required/>
										<div class="control-group">
											<label class="control-label" for="tipocapa">Grupo de capas: </label>
												<select id="tipocapa" class="form-select" onchange="actloadVisor()">
													<option selected disabled>Seleccione...</option>
													<option value="catastro">Base catastral</option>
													<option value="pgirs">Capas pgirs</option>
													<option value="gestion_del_riesgo">Gestión del riesgo</option>
													<option value="dane">Capas dane</option>													
													<option value="restitucion">Capas restitución</option>
													<option value="ortofotos">Ortofotográfias</option>
													<option value="mdts">Modelos digitales de terreno</option>												
												</select>
												<div class="button-row">
													<button type="submit" class="btn btn-azul" id="botonLoadvisor" disabled>Agregar Capa al Visor Geográfico</button>
												</div><br>										
										</div>
									</div>
							    </form>
								<form id="deleteVisor">
									<div class="container" style="font-size: 14px;">
										<div class="control-group">
											<label class="control-label" for="tipocapaVisor">Grupo de capas: </label>
												<select id="esquemaVisor" class="form-select" onchange="datosiniVisor()">
													<option selected disabled>Seleccione...</option>
													<option value="catastro">Base catastral</option>
													<option value="pgirs">Capas pgirs</option>
													<option value="gestion_del_riesgo">Gestión del riesgo</option>
													<option value="dane">Capas dane</option>													
													<option value="restitucion">Capas restitución</option>
													<option value="ortofotos">Ortofotográfias</option>
													<option value="mdts">Modelos digitales de terreno</option>										
												</select>
												<label class="control-label" for="tablasbaseVisor" id="labeltablasbaseVisor">Seleccione la tabla a eliminar en el visor: </label>											
												<select id="tablasbaseVisor" class="form-control" disabled onchange="actdeleteVisor()"></select>												
												<div class="button-row">
													<button type="submit" class="btn btn-danger" id="botonDeletevisor" disabled>Eliminar Capa en el Visor Geográfico</button>
												</div><br>										
										</div>
									</div>
							    </form>
							</div>
						</div>
			
			
					</div>
				</div>
			</div>
			

			
			<section class="dots-container" id="loading">
				<div class="dot"></div>
				<div class="dot"></div>
				<div class="dot"></div>
				<div class="dot"></div>
				<div class="dot"></div>
			</section>

			<footer class="footer">
				<div class="container-fluid">				
				</div>
			</footer>
		</div>

		
		<!-- End Custom template -->
	</div>
	<!--   Core JS Files   -->
	<script src="../assets/js/core/jquery-3.7.1.min.js"></script>
	<script src="../assets/js/core/popper.min.js"></script>
	<script src="../assets/js/core/bootstrap.min.js"></script>
	
	<!-- jQuery Scrollbar -->
	<script src="../assets/js/plugin/jquery-scrollbar/jquery.scrollbar.min.js"></script>	<!-- Kaiadmin JS -->
	<script src="../assets/js/kaiadmin.min.js"></script>
	<!-- Kaiadmin DEMO methods, don't include it in your project! -->
	<script src="../assets/js/setting-demo2.js"></script>
	<script>
		$('#displayNotif').on('click', function(){
			var placementFrom = $('#notify_placement_from option:selected').val();
			var placementAlign = $('#notify_placement_align option:selected').val();
			var state = $('#notify_state option:selected').val();
			var style = $('#notify_style option:selected').val();
			var content = {};

			content.message = 'Turning standard Bootstrap alerts into "notify" like notifications';
			content.title = 'Bootstrap notify';
			if (style == "withicon") {
				content.icon = 'fa fa-bell';
			} else {
				content.icon = 'none';
			}
			content.url = 'index.html';
			content.target = '_blank';

			$.notify(content,{
				type: state,
				placement: {
					from: placementFrom,
					align: placementAlign
				},
				time: 1000,
			});
		});
	</script>
	<script src="/buenaventura/admin/inf.js"></script>
	<script src="tables.js"></script>
	<script type="text/javascript">
		var Tawk_API=Tawk_API||{}, Tawk_LoadStart=new Date();
		(function(){
		var s1=document.createElement("script"),s0=document.getElementsByTagName("script")[0];
		s1.async=true;
		s1.src='https://embed.tawk.to/66180e681ec1082f04e155fa/1hr6vgi15';
		s1.charset='UTF-8';
		s1.setAttribute('crossorigin','*');
		s0.parentNode.insertBefore(s1,s0);
	  })();
	</script>
	<!--<script src="/buenaventura/visor/src/app/querys.js"></script>-->
</body>
</html>